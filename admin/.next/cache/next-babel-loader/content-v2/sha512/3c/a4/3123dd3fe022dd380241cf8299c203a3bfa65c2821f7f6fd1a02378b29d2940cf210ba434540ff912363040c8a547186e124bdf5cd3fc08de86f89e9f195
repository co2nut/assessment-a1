{"ast":null,"code":"import _extends from \"/Users/soonsionglim/Development/etern/admin/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"/Users/soonsionglim/Development/etern/admin/components/specs/form.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { Card, Row, Col, Form, Input, Button, Alert } from 'antd';\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { API_URL } from '../../api';\nvar layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nvar tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\n\nvar App = function App(props) {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState(''),\n      formErr = _useState[0],\n      setFormErr = _useState[1];\n\n  var onFinish = function onFinish(values) {\n    var make = values.make,\n        model = values.model,\n        year = values.year,\n        variant = values.variant;\n\n    if (props.mode === 'update') {\n      return axios.put(\"\".concat(API_URL, \"api/specs/\").concat(props.data.id), {\n        Make: make,\n        Model: model,\n        Year: year,\n        Variant: variant\n      }, {\n        headers: {\n          'Authorization': \"Bearer \".concat(JSON.parse(Cookie.get(\"userInfo\")).access_token)\n        }\n      }).then(function (res) {\n        // console.log(res.data)\n        if (res.data.success) {\n          router.push('/specs');\n        } else {\n          setFormErr(\"Invalid \" + res.data[0].FailedField.split(\".\")[1] + \" entered\");\n        }\n      })[\"catch\"](function (err) {\n        setFormErr(\"Model already exists\"); // console.log(err)\n      });\n    }\n\n    axios.post(\"\".concat(API_URL, \"api/specs\"), {\n      Make: make,\n      Model: model,\n      Year: year,\n      Variant: variant,\n      Status: \"1\"\n    }, {\n      headers: {\n        'Authorization': \"Bearer \".concat(JSON.parse(Cookie.get(\"userInfo\")).access_token)\n      }\n    }).then(function (res) {\n      console.log(res.data);\n\n      if (res.data.success) {\n        router.push('/specs');\n      } else {\n        setFormErr(\"Invalid \" + res.data[0].FailedField.split(\".\")[1] + \" entered\");\n      }\n    })[\"catch\"](function (err) {\n      setFormErr(\"Model already exists\");\n      console.log(err);\n    });\n  };\n\n  var onFinishFailed = function onFinishFailed(errorInfo) {\n    console.log('Failed:', errorInfo);\n  };\n\n  var _props$data = props.data,\n      make = _props$data.make,\n      model = _props$data.model,\n      year = _props$data.year,\n      variant = _props$data.variant;\n  return __jsx(React.Fragment, null, formErr ? __jsx(Alert, {\n    message: formErr,\n    closable: true,\n    type: \"error\",\n    showIcon: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 18\n    }\n  }) : null, __jsx(Card, {\n    style: {\n      marginTop: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, __jsx(Form, _extends({}, layout, {\n    initialValues: {\n      make: make,\n      model: model,\n      year: year,\n      variant: variant\n    },\n    name: \"basic\",\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), __jsx(Form.Item, {\n    label: \"Make\",\n    name: \"make\",\n    rules: [{\n      required: true,\n      message: 'Please input your make!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, {\n    label: \"Model\",\n    name: \"model\",\n    rules: [{\n      required: true,\n      message: 'Please input your model!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, {\n    label: \"Year\",\n    name: \"year\",\n    rules: [{\n      required: true,\n      message: 'Please input your year!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, {\n    label: \"Variant\",\n    name: \"variant\",\n    rules: [{\n      required: true,\n      message: 'Please input your variant!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, _extends({}, tailLayout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, props.mode === 'update' ? \"Update\" : \"Create\")), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      router.push('/specs');\n    },\n    type: \"warning\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"Cancel\")))))));\n};\n\n_s(App, \"4nRoYR+Z10aXrpTcjVsKXUvSahM=\", false, function () {\n  return [useRouter];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/soonsionglim/Development/etern/admin/components/specs/form.js"],"names":["useState","useRouter","Card","Row","Col","Form","Input","Button","Alert","axios","Cookie","API_URL","layout","labelCol","span","wrapperCol","tailLayout","offset","App","props","router","formErr","setFormErr","onFinish","values","make","model","year","variant","mode","put","data","id","Make","Model","Year","Variant","headers","JSON","parse","get","access_token","then","res","success","push","FailedField","split","err","post","Status","console","log","onFinishFailed","errorInfo","marginTop","required","message"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { useRouter } from 'next/router'\nimport { Card, Row, Col, Form, Input, Button, Alert } from 'antd';\nimport axios from \"axios\"\nimport Cookie from \"js-cookie\";\nimport { API_URL } from '../../api'\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16,\n  },\n};\n\nconst App = (props) => {\n  const router = useRouter()  \n  const [formErr, setFormErr] = useState('')\n  \n  const onFinish = (values) => {\n    const { make, model, year, variant }  = values\n\n    if(props.mode === 'update'){\n      return axios.put(`${API_URL}api/specs/${props.data.id}`,\n        {\n          Make:make,\n          Model:model,\n          Year:year,\n          Variant:variant,\n        },\n        {\n          headers: {\n            'Authorization': `Bearer ${JSON.parse(Cookie.get(\"userInfo\")).access_token}`\n          }\n        }\n      )\n      .then((res) => {\n        // console.log(res.data)\n        if(res.data.success){\n          router.push('/specs')\n        }else{\n          setFormErr(\"Invalid \" +  res.data[0].FailedField.split(\".\")[1] + \" entered\")  \n        }\n      })\n      .catch((err) => {\n        setFormErr(\"Model already exists\")\n        // console.log(err)\n      })\n    }\n    axios.post(`${API_URL}api/specs`,\n      {\n        Make:make,\n        Model:model,\n        Year:year,\n        Variant:variant,\n        Status:\"1\"\n      },\n      {\n        headers: {\n          'Authorization': `Bearer ${JSON.parse(Cookie.get(\"userInfo\")).access_token}`\n        }\n      }\n    )\n    .then((res) => {\n      console.log(res.data)\n      if(res.data.success){\n        router.push('/specs')\n      }else{\n        setFormErr(\"Invalid \" +  res.data[0].FailedField.split(\".\")[1] + \" entered\")  \n      }\n    })\n    .catch((err) => {\n      setFormErr(\"Model already exists\")\n      console.log(err)\n    })\n\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n  const {make, model, year, variant} = props.data\n  return (\n    <>\n      {formErr ? <Alert message={formErr} closable type=\"error\" showIcon /> : null}\n      <Card style={{ marginTop: 20 }}>\n        <Form\n          {...layout}\n          initialValues={{ make, model, year, variant }}\n          name=\"basic\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n        >\n          <Form.Item\n            label=\"Make\"\n            name=\"make\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your make!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Model\"\n            name=\"model\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your model!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Year\"\n            name=\"year\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your year!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Variant\"\n            name=\"variant\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your variant!',\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n\n          <Form.Item {...tailLayout}>\n            <Row>\n              <Col span={6}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                  {props.mode==='update'?\"Update\":\"Create\"}\n                </Button>\n              </Col>\n              <Col span={6}>\n                <Button onClick={() => { router.push('/specs') }} type=\"warning\">\n                  Cancel\n                </Button>\n              </Col>\n            </Row>\n          </Form.Item>\n        </Form>\n      </Card>\n    </>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}