{"ast":null,"code":"var _jsxFileName = \"/Users/soonsionglim/Development/etern/admin/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { useState } from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport { Card, Row, Col, Form, Input, Button, Alert } from 'antd';\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { parseCookies } from \"../lib/parseCookies\";\nimport { API_URL } from '../api';\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\n\nconst Index = ({\n  userInfo\n}) => {\n  const router = useRouter();\n  const {\n    0: loginErr,\n    1: setLoginErr\n  } = useState(false);\n\n  const onFinish = values => {\n    // axios.post(`${API_URL}auth`, null, // gofiber\n    //   {\n    //     params: {\n    //       username: values.username,\n    //       password: values.password,\n    //     }\n    //   }\n    // )\n    axios.post(`${API_URL}authentication`, null, {\n      query: {\n        strategy: \"local\",\n        username: values.username,\n        password: values.password\n      }\n    }).then(res => {\n      console.log('success');\n      Cookie.set(\"userInfo\", JSON.stringify(res.data));\n      router.push('/ads');\n    }).catch(err => {\n      setLoginErr(true);\n      console.log(err);\n    });\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Aneka Auto\")), __jsx(Row, {\n    style: {\n      marginTop: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    span: 8,\n    offset: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, loginErr ? __jsx(Alert, {\n    message: \"Unauthorized Login\",\n    closable: true,\n    type: \"error\",\n    showIcon: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 23\n    }\n  }) : null, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    style: {\n      textAlign: 'center',\n      marginBottom: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: 'bolder'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 67\n    }\n  }, \"ANEKA\"), \" AUTO SYSTEM\"), __jsx(Form, _extends({}, layout, {\n    name: \"basic\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), __jsx(Form.Item, {\n    label: \"Username\",\n    name: \"username\",\n    rules: [{\n      required: true,\n      message: 'Please input your username!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  })), __jsx(Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: 'Please input your password!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, __jsx(Input.Password, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  })), __jsx(Form.Item, _extends({}, tailLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }), __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, \"Login\")))))));\n};\n\nIndex.getInitialProps = ({\n  req\n}) => {\n  const cookies = parseCookies(req);\n  return {\n    userInfo: cookies.userInfo\n  };\n};\n\nexport default Index; // export async function getServerSideProps(params) {\n//   let carAds = await carAdsFilter({}, 0)\n//   return {\n//     props:{\n//       carAds\n//     }\n//   }\n// }","map":{"version":3,"sources":["/Users/soonsionglim/Development/etern/admin/pages/index.js"],"names":["useState","Head","useRouter","Card","Row","Col","Form","Input","Button","Alert","axios","Cookie","parseCookies","API_URL","layout","labelCol","span","wrapperCol","tailLayout","offset","Index","userInfo","router","loginErr","setLoginErr","onFinish","values","post","query","strategy","username","password","then","res","console","log","set","JSON","stringify","data","push","catch","err","onFinishFailed","errorInfo","marginTop","textAlign","marginBottom","fontWeight","remember","required","message","getInitialProps","req","cookies"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport Head from 'next/head'\nimport { useRouter } from 'next/router'\nimport { Card, Row, Col, Form, Input, Button, Alert } from 'antd';\nimport axios from \"axios\"\nimport Cookie from \"js-cookie\";\nimport { parseCookies } from \"../lib/parseCookies\";\nimport { API_URL } from '../api'\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16,\n  },\n};\n\nconst Index = ({userInfo}) => {\n  const router = useRouter()\n  const [loginErr, setLoginErr] = useState(false)\n\n  const onFinish = (values) => {\n    // axios.post(`${API_URL}auth`, null, // gofiber\n    //   {\n    //     params: {\n    //       username: values.username,\n    //       password: values.password,\n    //     }\n    //   }\n    // )\n    axios.post(`${API_URL}authentication`, null,\n      {\n        query: {\n          strategy:\"local\",\n          username: values.username,\n          password: values.password,\n        }\n      }\n    )\n    .then((res) => {\n      console.log('success')\n      Cookie.set(\"userInfo\", JSON.stringify(res.data));\n      router.push('/ads')\n    })\n    .catch((err) => {\n      setLoginErr(true)\n      console.log(err)\n    })\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Aneka Auto</title>\n      </Head>\n      <Row style={{ marginTop: '10%' }}>\n        <Col span={8} offset={8} >\n          {loginErr ? <Alert message=\"Unauthorized Login\" closable type=\"error\" showIcon /> : null}\n          <Card>\n            <h2 style={{ textAlign: 'center', marginBottom: 50 }}><span style={{fontWeight:'bolder'}}>ANEKA</span> AUTO SYSTEM</h2>\n            <Form\n              {...layout}\n              name=\"basic\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n              onFinishFailed={onFinishFailed}\n            >\n              <Form.Item\n                label=\"Username\"\n                name=\"username\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your username!',\n                  },\n                ]}\n              >\n                <Input />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your password!',\n                  },\n                ]}\n              >\n                <Input.Password />\n              </Form.Item>\n\n              {/* <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n                <Checkbox>Remember me</Checkbox>\n              </Form.Item> */}\n\n              <Form.Item {...tailLayout}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                  Login\n              </Button>\n              </Form.Item>\n            </Form>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nIndex.getInitialProps = ({ req }) => {\n  const cookies = parseCookies(req);\n\n  return {\n    userInfo: cookies.userInfo\n  };\n};\n\nexport default Index\n\n// export async function getServerSideProps(params) {\n\n//   let carAds = await carAdsFilter({}, 0)\n//   return {\n//     props:{\n//       carAds\n//     }\n//   }\n// }\n"]},"metadata":{},"sourceType":"module"}