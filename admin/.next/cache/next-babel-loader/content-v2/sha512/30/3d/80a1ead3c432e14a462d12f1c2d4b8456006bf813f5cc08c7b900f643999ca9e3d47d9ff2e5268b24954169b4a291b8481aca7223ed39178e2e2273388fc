{"ast":null,"code":"import _extends from \"/Users/soonsionglim/Development/etern/admin/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/Users/soonsionglim/Development/etern/admin/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/soonsionglim/Development/etern/admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/soonsionglim/Development/etern/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/soonsionglim/Development/etern/admin/components/ads/form.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { Radio, Select, Upload, Card, Row, Col, Form, Input, InputNumber, Button, Alert } from 'antd';\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { API_URL } from '../../api';\nimport { mileageRange } from '../../lib/data';\nimport { InboxOutlined, CloseCircleOutlined } from '@ant-design/icons';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nvar TextArea = Input.TextArea;\nvar Option = Select.Option;\nvar Dragger = Upload.Dragger;\n\nvar FormData = require('form-data');\n\nvar layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nvar layoutPrice = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 4\n  }\n};\nvar layoutCondition = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 10\n  }\n};\nvar layout2 = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 20\n  }\n};\nvar tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16\n  }\n};\nvar SortableItem = SortableElement(_c = function _c(_ref) {\n  var value = _ref.value,\n      onRemove = _ref.onRemove;\n  return __jsx(\"div\", {\n    key: value.uid,\n    style: {\n      width: 100,\n      height: 100,\n      margin: 5,\n      textAlign: \"center\",\n      \"float\": 'left',\n      backgroundColor: \"lightgrey\",\n      borderRadius: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 10\n    }\n  }, value.response ? __jsx(\"img\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    src: value.response,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }) : __jsx(\"p\", {\n    style: {\n      marginTop: '35%',\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 88\n    }\n  }, \"Uploading...\"), __jsx(\"button\", {\n    style: {\n      cursor: 'pointer',\n      position: 'absolute',\n      borderRadius: 10,\n      marginLeft: -15,\n      marginTop: -5,\n      fontSize: 10\n    },\n    onClick: function onClick() {\n      return onRemove(value.uid);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, \"X\"));\n});\n_c2 = SortableItem;\nvar SortableList = SortableContainer(_c3 = function _c3(_ref2) {\n  var items = _ref2.items,\n      onRemove = _ref2.onRemove;\n  return __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      padding: 15,\n      paddingLeft: 20,\n      overflow: \"auto\",\n      backgroundColor: \"lightblue\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, items.map(function (value, index) {\n    return __jsx(\"div\", {\n      id: \"item_\" + value.id,\n      key: \"item-\".concat(value.uid),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, __jsx(SortableItem, {\n      key: \"item-\".concat(index),\n      index: index,\n      value: value,\n      onRemove: onRemove,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }));\n  }));\n});\n_c4 = SortableList;\n\nvar App = function App(props) {\n  _s();\n\n  var _props$data = props.data,\n      condition = _props$data.condition,\n      mileage = _props$data.mileage,\n      remark = _props$data.remark,\n      price = _props$data.price,\n      title = _props$data.title,\n      description = _props$data.description,\n      images = _props$data.images,\n      make = _props$data.make,\n      model = _props$data.model,\n      year = _props$data.year,\n      variant = _props$data.variant,\n      engine = _props$data.engine,\n      transmission = _props$data.transmission;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var router = useRouter();\n\n  var _useState = useState(''),\n      formErr = _useState[0],\n      setFormErr = _useState[1];\n\n  var _useState2 = useState([]),\n      imageList = _useState2[0],\n      setImageList = _useState2[1];\n\n  var _useState3 = useState([]),\n      makeList = _useState3[0],\n      setMakeList = _useState3[1];\n\n  var _useState4 = useState([]),\n      modelList = _useState4[0],\n      setModelList = _useState4[1];\n\n  var _useState5 = useState([]),\n      yearList = _useState5[0],\n      setYearList = _useState5[1];\n\n  var _useState6 = useState([]),\n      variantList = _useState6[0],\n      setVariantList = _useState6[1];\n\n  var getParams = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(field, filterObj) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", axios.get(\"\".concat(API_URL, \"spec-params\"), {\n                params: {\n                  distinct: {\n                    field: field,\n                    filterObj: filterObj\n                  }\n                }\n              }).then(function (res) {\n                if (field === 'make') {\n                  return setMakeList(res.data.result);\n                }\n\n                if (field === 'model') {\n                  return setModelList(res.data.result);\n                }\n\n                if (field === 'year') {\n                  return setYearList(res.data.result);\n                }\n\n                if (field === 'variant') {\n                  return setVariantList(res.data.result);\n                }\n              })[\"catch\"](function (err) {\n                console.log(err);\n                return [];\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getParams(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onNumberChange = function onNumberChange(e) {\n    var value = e.target.value;\n    var reg = /^-?\\d*(\\.\\d*)?$/;\n\n    if (!isNaN(value) && reg.test(value) || value === '' || value === '-') {\n      props.onChange(value);\n    }\n  };\n\n  useEffect(function () {\n    if (props.mode === 'update') {\n      getParams(\"model\", {\n        make: make\n      });\n      getParams(\"year\", {\n        make: make,\n        model: model\n      });\n      getParams(\"variant\", {\n        make: make,\n        model: model,\n        year: year\n      });\n\n      var _imageList = images.map(function (i, index) {\n        console.log({\n          i: i,\n          index: index\n        });\n        return {\n          response: i,\n          uid: \"img-\" + index\n        };\n      });\n\n      setImageList(_imageList);\n    }\n\n    getParams(\"make\", {});\n  }, []);\n\n  var onSortEnd = function onSortEnd(_ref4) {\n    var oldIndex = _ref4.oldIndex,\n        newIndex = _ref4.newIndex;\n    setImageList(arrayMove(imageList, oldIndex, newIndex));\n  };\n\n  function onRemove(id) {\n    setImageList(imageList.filter(function (item) {\n      return item.uid !== id;\n    }));\n  }\n\n  var uploadImage = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(options) {\n      var onSuccess, onError, file, onProgress, fmData, config, res, error;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              onSuccess = options.onSuccess, onError = options.onError, file = options.file, onProgress = options.onProgress;\n              fmData = new FormData();\n              config = {\n                headers: {\n                  \"content-type\": \"multipart/form-data\",\n                  'Authorization': \"Bearer \".concat(JSON.parse(Cookie.get(\"userInfo\")).accessToken)\n                } // onUploadProgress: event => {\n                //   const percent = Math.floor((event.loaded / event.total) * 100);\n                //   setProgress(percent);\n                //   if (percent === 100) {\n                //     setTimeout(() => setProgress(0), 1000);\n                //   }\n                //   onProgress({ percent: (event.loaded / event.total) * 100 });\n                // }\n\n              };\n              fmData.append(\"documents\", file);\n              _context2.prev = 4;\n              _context2.next = 7;\n              return axios.post(\"\".concat(API_URL, \"upload/\"), fmData, config);\n\n            case 7:\n              res = _context2.sent;\n              onSuccess(res.data[0]);\n              console.log(\"server res: \", res);\n              _context2.next = 17;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](4);\n              console.log(\"Eroor: \", _context2.t0);\n              error = new Error(\"Some error\");\n              onError({\n                err: _context2.t0\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 12]]);\n    }));\n\n    return function uploadImage(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var uploadProps = {\n    accept: \"image/*\",\n    showUploadList: false,\n    multiple: true,\n    withCredentials: true,\n    maxCount: 20,\n    fileList: imageList,\n    onChange: function onChange(info) {\n      setImageList(info.fileList);\n    },\n    onDrop: function onDrop(e) {\n      console.log('Dropped files', e.dataTransfer.files);\n    }\n  };\n\n  var onFinish = function onFinish(values) {\n    var title = values.title,\n        description = values.description,\n        condition = values.condition,\n        make = values.make,\n        model = values.model,\n        year = values.year,\n        variant = values.variant,\n        mileage = values.mileage,\n        remark = values.remark,\n        price = values.price,\n        engine = values.engine,\n        transmission = values.transmission; // return  console.log({title, description, condition, make, model, year, variant, mileage, remark, price}, imageList.map(i=>i.response))\n\n    var Images = imageList.map(function (i) {\n      return i.response;\n    });\n\n    if (props.mode === 'update') {\n      if (Images.length > 0) {\n        return axios.put(\"\".concat(API_URL, \"api/ads/\").concat(props.data.id), {\n          Title: title,\n          Description: description,\n          Condition: condition,\n          Transmission: transmission,\n          Images: Images,\n          Make: make,\n          Model: model,\n          Year: year,\n          Variant: variant,\n          Mileage: mileage,\n          Remark: remark,\n          Price: price,\n          Engine: engine\n        }, {\n          headers: {\n            'Authorization': \"Bearer \".concat(JSON.parse(Cookie.get(\"userInfo\")).accessToken)\n          }\n        }).then(function (res) {\n          if (res.data.success) {\n            router.push('/ads');\n          } else {\n            setFormErr(\"Invalid \" + res.data[0].FailedField.split(\".\")[1] + \" entered\");\n          }\n        })[\"catch\"](function (err) {\n          setFormErr(\"Model already exists\");\n        });\n      } else {\n        setFormErr(\"Please upload image\");\n      }\n    }\n\n    if (Images.length > 0) {\n      axios.post(\"\".concat(API_URL, \"api/ads\"), {\n        Title: title,\n        Description: description,\n        Condition: condition,\n        Transmission: transmission,\n        Images: Images,\n        Make: make,\n        Model: model,\n        Year: year,\n        Variant: variant,\n        Mileage: mileage,\n        Remark: remark,\n        Price: price,\n        Status: \"1\",\n        Engine: engine\n      }, {\n        headers: {\n          'Authorization': \"Bearer \".concat(JSON.parse(Cookie.get(\"userInfo\")).accessToken)\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.success) {\n          router.push('/ads');\n        } else {\n          setFormErr(\"Invalid \" + res.data[0].FailedField.split(\".\")[1] + \" entered\");\n        }\n      })[\"catch\"](function (err) {\n        setFormErr(\"Ads creation error\");\n        console.log(err);\n      });\n    } else {\n      setFormErr(\"Please upload image\");\n    }\n  };\n\n  var onFinishFailed = function onFinishFailed(errorInfo) {\n    console.log('Failed:', errorInfo);\n  };\n\n  return __jsx(React.Fragment, null, formErr ? __jsx(Alert, {\n    message: formErr,\n    closable: true,\n    type: \"error\",\n    showIcon: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 18\n    }\n  }) : null, __jsx(Card, {\n    style: {\n      marginTop: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }\n  }, imageList.length > 0 ? __jsx(SortableList, {\n    axis: \"xy\",\n    items: imageList,\n    onSortEnd: onSortEnd,\n    onRemove: onRemove,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 29\n    }\n  }) : null, __jsx(Dragger, _extends({}, uploadProps, {\n    customRequest: uploadImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }), __jsx(\"p\", {\n    className: \"ant-upload-drag-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 11\n    }\n  }, \" \", __jsx(InboxOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 48\n    }\n  }), \" \"), __jsx(\"p\", {\n    className: \"ant-upload-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 11\n    }\n  }, \" Click or drag file to this area to upload \"), __jsx(\"p\", {\n    className: \"ant-upload-hint\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }\n  }, \" It is recommended to upload files with size that is not more than 10mb \")), __jsx(Form, _extends({\n    form: form,\n    style: {\n      marginTop: 30\n    }\n  }, layout, {\n    initialValues: {\n      condition: condition,\n      title: title,\n      mileage: mileage,\n      remark: remark,\n      price: price,\n      make: make,\n      model: model,\n      year: year,\n      variant: variant,\n      description: description,\n      engine: engine,\n      transmission: transmission\n    },\n    name: \"basic\",\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }\n  }), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Item, {\n    name: \"condition\",\n    label: \"Condition\",\n    rules: [{\n      required: true,\n      message: 'Please pick an item!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, __jsx(Radio.Group, {\n    size: \"middle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }\n  }, __jsx(Radio.Button, {\n    value: \"0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 15\n    }\n  }, \"RECON\"), __jsx(Radio.Button, {\n    value: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 15\n    }\n  }, \"USED\")))), __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Item, {\n    name: \"transmission\",\n    label: \"Transmission\",\n    rules: [{\n      required: true,\n      message: 'Please pick an item!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 11\n    }\n  }, __jsx(Radio.Group, {\n    size: \"middle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }\n  }, __jsx(Radio.Button, {\n    value: \"0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 15\n    }\n  }, \"AUTO\"), __jsx(Radio.Button, {\n    value: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 15\n    }\n  }, \"MANUAL\"))))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Make\",\n    name: \"make\",\n    rules: [{\n      required: true,\n      message: 'Please input your make!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    onChange: function onChange(e) {\n      console.log(\"hello\"), form.setFieldsValue({\n        model: '',\n        year: '',\n        variant: ''\n      }), getParams(\"model\", {\n        make: e\n      });\n    },\n    showSearch: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 17\n    }\n  }, makeList.map(function (i) {\n    return __jsx(Option, {\n      key: i,\n      value: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 21\n      }\n    }, i);\n  })))), __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Model\",\n    name: \"model\",\n    rules: [{\n      required: true,\n      message: 'Please input your model!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    onChange: function onChange(e) {\n      form.setFieldsValue({\n        year: '',\n        variant: ''\n      }), getParams(\"year\", {\n        make: form.getFieldValue('make'),\n        model: e\n      });\n    },\n    showSearch: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }\n  }, modelList.map(function (i) {\n    return __jsx(Option, {\n      key: i,\n      value: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 21\n      }\n    }, i);\n  }))))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Year\",\n    name: \"year\",\n    rules: [{\n      required: true,\n      message: 'Please input your year!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    onChange: function onChange(e) {\n      form.setFieldsValue({\n        variant: ''\n      }), getParams(\"variant\", {\n        make: form.getFieldValue('make'),\n        model: form.getFieldValue('model'),\n        year: e\n      });\n    },\n    showSearch: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 17\n    }\n  }, yearList.map(function (i) {\n    return __jsx(Option, {\n      key: i,\n      value: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 21\n      }\n    }, i);\n  })))), __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Variant\",\n    name: \"variant\",\n    rules: [{\n      required: true,\n      message: 'Please input your variant!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  }, variantList.map(function (i) {\n    return __jsx(Option, {\n      key: i,\n      value: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 21\n      }\n    }, i);\n  }))))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Mileage\",\n    name: \"mileage\",\n    rules: [{\n      required: true,\n      message: 'Please input your mileage!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    onChange: function onChange(e) {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }\n  }, mileageRange.map(function (i) {\n    return __jsx(Option, {\n      key: i,\n      value: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 21\n      }\n    }, i);\n  })))), __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    label: \"Remark\",\n    name: \"remark\",\n    rules: [{\n      required: true,\n      message: 'Please input your remark!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 17\n    }\n  })))), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Item, {\n    label: \"Price\",\n    name: \"price\",\n    rules: [{\n      required: true,\n      message: 'Please input your price!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 11\n    }\n  }, __jsx(InputNumber, {\n    formatter: function formatter(value) {\n      return \"\".concat(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    },\n    parser: function parser(value) {\n      return value.replace(/\\$\\s?|(,*)/g, '');\n    },\n    style: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    min: \"0\",\n    max: \"999999999\",\n    step: \"10000\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 13\n    }\n  }))), __jsx(Col, {\n    span: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Item, {\n    label: \"Engine Capacity\",\n    name: \"engine\",\n    rules: [{\n      required: true,\n      message: 'Please input your engine capacity!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 15\n    }\n  }, __jsx(InputNumber, {\n    style: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    min: \"0\",\n    max: \"999999\",\n    step: \"0.1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 17\n    }\n  })))), __jsx(Form.Item, _extends({}, layout2, {\n    label: \"Title\",\n    name: \"title\",\n    rules: [{\n      required: true,\n      message: 'Please input your title!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 11\n    }\n  }), __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, _extends({}, layout2, {\n    label: \"Description\",\n    name: \"description\",\n    rules: [{\n      required: true,\n      message: 'Please input your description!'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 11\n    }\n  }), __jsx(TextArea, {\n    rows: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 13\n    }\n  })), __jsx(Form.Item, _extends({}, tailLayout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 11\n    }\n  }), __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 13\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 17\n    }\n  }, props.mode === 'update' ? \"Edit\" : \"Create\")), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      router.push('/ads');\n    },\n    type: \"warning\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 17\n    }\n  }, \"Cancel\")))))));\n};\n\n_s(App, \"cPLqqN+n3NTwe1nBQVUMLzXEXeE=\", false, function () {\n  return [Form.useForm, useRouter];\n});\n\n_c5 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"SortableItem$SortableElement\");\n$RefreshReg$(_c2, \"SortableItem\");\n$RefreshReg$(_c3, \"SortableList$SortableContainer\");\n$RefreshReg$(_c4, \"SortableList\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"sources":["/Users/soonsionglim/Development/etern/admin/components/ads/form.js"],"names":["useState","useEffect","useRouter","Radio","Select","Upload","Card","Row","Col","Form","Input","InputNumber","Button","Alert","axios","Cookie","API_URL","mileageRange","InboxOutlined","CloseCircleOutlined","SortableContainer","SortableElement","arrayMove","TextArea","Option","Dragger","FormData","require","layout","labelCol","span","wrapperCol","layoutPrice","layoutCondition","layout2","tailLayout","offset","SortableItem","value","onRemove","uid","width","height","margin","textAlign","backgroundColor","borderRadius","response","marginTop","cursor","position","marginLeft","fontSize","SortableList","items","padding","paddingLeft","overflow","map","index","id","App","props","data","condition","mileage","remark","price","title","description","images","make","model","year","variant","engine","transmission","useForm","form","router","formErr","setFormErr","imageList","setImageList","makeList","setMakeList","modelList","setModelList","yearList","setYearList","variantList","setVariantList","getParams","field","filterObj","get","params","distinct","then","res","result","err","console","log","onNumberChange","e","target","reg","isNaN","test","onChange","mode","i","onSortEnd","oldIndex","newIndex","filter","item","uploadImage","options","onSuccess","onError","file","onProgress","fmData","config","headers","JSON","parse","accessToken","append","post","error","Error","uploadProps","accept","showUploadList","multiple","withCredentials","maxCount","fileList","info","onDrop","dataTransfer","files","onFinish","values","Images","length","put","Title","Description","Condition","Transmission","Make","Model","Year","Variant","Mileage","Remark","Price","Engine","success","push","FailedField","split","Status","onFinishFailed","errorInfo","required","message","setFieldsValue","getFieldValue","replace"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { useRouter } from 'next/router'\nimport { Radio, Select, Upload, Card, Row, Col, Form, Input, InputNumber, Button, Alert } from 'antd';\nimport axios from \"axios\"\nimport Cookie from \"js-cookie\";\nimport { API_URL } from '../../api'\nimport { mileageRange } from '../../lib/data'\n\nimport { InboxOutlined ,CloseCircleOutlined} from '@ant-design/icons';\nimport {SortableContainer, SortableElement} from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nconst { TextArea } = Input;\nconst { Option } = Select;\nconst { Dragger } = Upload;\nvar FormData = require('form-data');\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst layoutPrice = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 4,\n  },\n};\n\nconst layoutCondition = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 10,\n  },\n};\n\nconst layout2 = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 20,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16,\n  },\n};\n\nconst SortableItem = SortableElement(({value,onRemove}) => {\n  return <div key={value.uid} style={{width:100, height:100, margin:5, textAlign:\"center\", float:'left', backgroundColor:\"lightgrey\", borderRadius:15}}>\n    {value.response?<img style={{width:'100%', height:'100%'}} src={value.response} />:<p style={{marginTop:'35%',textAlign:'center'}}>Uploading...</p>}\n    <button  style={{cursor:'pointer',position:'absolute',borderRadius:10,marginLeft:-15,marginTop:-5,fontSize:10}} onClick={() => onRemove(value.uid)}>\n        X\n      </button>\n    </div>\n});\n\nconst SortableList = SortableContainer(({items,onRemove}) => {\n  return (\n    <div style={{width:\"100%\", padding:15, paddingLeft:20, overflow: \"auto\",backgroundColor:\"lightblue\"}} >\n      {items.map((value, index) => (\n        <div id={\"item_\" + value.id} key={`item-${value.uid}`}>\n          <SortableItem  key={`item-${index}`} index={index} value={value} onRemove={onRemove} />\n        </div>\n      ))}\n    </div>\n  );\n});\n\nconst App = (props) => {\n  const { condition, mileage, remark, price, title, description,\n   images, make, model, year, variant,engine,transmission\n  } = props.data\n  const [form] = Form.useForm();\n\n  const router = useRouter()  \n  const [formErr, setFormErr] = useState('')\n  const [imageList, setImageList] = useState([])\n  const [makeList, setMakeList] = useState([])\n  const [modelList, setModelList] = useState([])\n  const [yearList, setYearList] = useState([])\n  const [variantList, setVariantList] = useState([])\n\n  const getParams =async(field, filterObj)=>{\n    return axios.get(`${API_URL}spec-params`,\n      {\n        params: {\n          distinct: {field, filterObj},\n        },\n      },\n    )\n    .then((res) => {\n      if(field === 'make'){\n        return setMakeList(res.data.result)\n      }\n      if(field === 'model'){\n        return setModelList(res.data.result)\n      }\n      if(field === 'year'){\n        return setYearList(res.data.result)\n      }\n      if(field === 'variant'){\n        return setVariantList(res.data.result)\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n      return []\n    })\n\n  }\n\n  const onNumberChange = (e) => {\n    const { value } = e.target;\n    const reg = /^-?\\d*(\\.\\d*)?$/;\n    if ((!isNaN(value) && reg.test(value)) || value === '' || value === '-') {\n      props.onChange(value);\n    }\n  };\n\n  useEffect(()=>{\n    if(props.mode === 'update'){\n      getParams(\"model\",{make})\n      getParams(\"year\",{make,model})\n      getParams(\"variant\",{make,model,year})\n      let imageList = images.map((i,index)=>{\n        console.log({i,index})\n        return {response:i, uid:\"img-\"+index}\n      })\n      setImageList(imageList)\n\n    }\n    getParams(\"make\",{})\n  },[])\n  \n\n  const onSortEnd = ({oldIndex, newIndex}) => {\n    setImageList(arrayMove(imageList, oldIndex, newIndex))\n  };\n\n  function onRemove(id){\n    setImageList(imageList.filter(item => item.uid !== id))\n    \n  }\n\n\n  const uploadImage = async options => {\n    const { onSuccess, onError, file, onProgress } = options;\n    const fmData = new FormData();\n    const config = {\n      headers: { \"content-type\": \"multipart/form-data\", 'Authorization': `Bearer ${JSON.parse(Cookie.get(\"userInfo\")).accessToken}` },\n      // onUploadProgress: event => {\n      //   const percent = Math.floor((event.loaded / event.total) * 100);\n      //   setProgress(percent);\n      //   if (percent === 100) {\n      //     setTimeout(() => setProgress(0), 1000);\n      //   }\n      //   onProgress({ percent: (event.loaded / event.total) * 100 });\n      // }\n    };\n    fmData.append(\"documents\", file);\n    try {\n      const res = await axios.post(`${API_URL}upload/`,\n        fmData,\n        config\n      );\n\n      onSuccess(res.data[0]);\n      console.log(\"server res: \", res);\n    } catch (err) {\n      console.log(\"Eroor: \", err);\n      const error = new Error(\"Some error\");\n      onError({ err });\n    }\n  };\n\n  const uploadProps = {\n    accept:\"image/*\",\n    showUploadList:false,\n    multiple: true,\n    withCredentials:true,\n    maxCount:20,\n    fileList:imageList,\n    onChange(info) {\n      setImageList(info.fileList)\n    },\n    onDrop(e) {\n      console.log('Dropped files', e.dataTransfer.files);\n    },\n  };\n  \n  const onFinish = (values) => {\n    const { title, description, condition, make, model, year, variant, mileage, remark, price,engine,transmission } = values\n    // return  console.log({title, description, condition, make, model, year, variant, mileage, remark, price}, imageList.map(i=>i.response))\n    let Images = imageList.map(i=>i.response)\n    \n\n    if(props.mode === 'update'){\n      if(Images.length>0){\n      return axios.put(`${API_URL}api/ads/${props.data.id}`,\n        {\n          Title:title,\n          Description:description,\n          Condition:condition,\n          Transmission:transmission,\n          Images,\n          Make:make,\n          Model:model,\n          Year:year,\n          Variant:variant,\n          Mileage:mileage,\n          Remark:remark,\n          Price:price,\n          Engine:engine\n        },\n        {\n          headers: {\n            'Authorization': `Bearer ${JSON.parse(Cookie.get(\"userInfo\")).accessToken}`\n          }\n        }\n      )\n      .then((res) => {\n        if(res.data.success){\n          router.push('/ads')\n        }else{\n          setFormErr(\"Invalid \" +  res.data[0].FailedField.split(\".\")[1] + \" entered\")  \n        }\n      })\n      .catch((err) => {\n        setFormErr(\"Model already exists\")\n      })}else{\n        setFormErr(\"Please upload image\")\n  \n      }\n    }\n    \n    if(Images.length>0){\n    axios.post(`${API_URL}api/ads`,\n      {\n        Title:title,\n        Description:description,\n        Condition:condition,\n        Transmission:transmission,\n        Images,\n        Make:make,\n        Model:model,\n        Year:year,\n        Variant:variant,\n        Mileage:mileage,\n        Remark:remark,\n        Price:price,\n        Status:\"1\",\n        Engine:engine\n\n      },\n      {\n        headers: {\n          'Authorization': `Bearer ${JSON.parse(Cookie.get(\"userInfo\")).accessToken}`\n        }\n      }\n    )\n    .then((res) => {\n      console.log(res.data)\n      if(res.data.success){\n        router.push('/ads')\n      }else{\n        setFormErr(\"Invalid \" +  res.data[0].FailedField.split(\".\")[1] + \" entered\")  \n      }\n    })\n    .catch((err) => {\n      setFormErr(\"Ads creation error\")\n      console.log(err)\n    })}else{\n      setFormErr(\"Please upload image\")\n\n    }\n\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  return (\n    <>\n      {formErr ? <Alert message={formErr} closable type=\"error\" showIcon /> : null}\n      <Card style={{ marginTop: 20 }}>\n        {imageList.length>0?<SortableList axis=\"xy\" items={imageList} onSortEnd={onSortEnd} onRemove={onRemove} />:null}\n        <Dragger {...uploadProps} \n          customRequest={uploadImage}\n          >\n          <p className=\"ant-upload-drag-icon\"> <InboxOutlined /> </p>\n          <p className=\"ant-upload-text\"> Click or drag file to this area to upload </p>\n          <p className=\"ant-upload-hint\"> It is recommended to upload files with size that is not more than 10mb </p>\n        </Dragger>\n\n        <Form\n          form={form}\n          style={{marginTop:30}}\n          {...layout}\n          initialValues={{ condition, title, mileage, remark, price, make, model, year, variant, description,engine,transmission }}\n          name=\"basic\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n        >\n\n          <Row>\n          <Col span={12}>\n          <Form.Item\n            name=\"condition\"\n            label=\"Condition\"\n            rules={[{ required: true, message: 'Please pick an item!' }]}\n          >\n            <Radio.Group size=\"middle\">\n              <Radio.Button value=\"0\">RECON</Radio.Button>\n              <Radio.Button value=\"1\">USED</Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n          </Col>\n          <Col span={12}>\n          <Form.Item\n            name=\"transmission\"\n            label=\"Transmission\"\n            rules={[{ required: true, message: 'Please pick an item!' }]}\n          >\n            <Radio.Group size=\"middle\">\n              <Radio.Button value=\"0\">AUTO</Radio.Button>\n              <Radio.Button value=\"1\">MANUAL</Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n          </Col>\n          </Row>\n\n          <Row>\n            <Col span={12}>\n              <Form.Item label=\"Make\" name=\"make\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your make!',\n                  },\n                ]}\n              >\n                <Select onChange={(e)=>{  console.log(\"hello\"), form.setFieldsValue({model:'', year:'', variant:''}), getParams(\"model\",{make:e}) }} showSearch>\n                  {makeList.map(i=>(\n                    <Option key={i} value={i}>{i}</Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </Col>\n            \n            <Col span={12}>\n              <Form.Item label=\"Model\" name=\"model\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your model!',\n                  },\n                ]}\n              >\n                <Select onChange={(e)=>{  form.setFieldsValue({year:'', variant:''}),  getParams(\"year\",{make:form.getFieldValue('make'),model:e}) }} showSearch>\n                  {modelList.map(i=>(\n                    <Option key={i} value={i}>{i}</Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col span={12}>\n              <Form.Item label=\"Year\" name=\"year\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your year!',\n                  },\n                ]}\n              >\n                <Select onChange={(e)=>{ form.setFieldsValue({variant:''}), getParams(\"variant\",{make:form.getFieldValue('make'),model:form.getFieldValue('model'),year:e}) }} showSearch>\n                  {yearList.map(i=>(\n                    <Option key={i} value={i}>{i}</Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </Col>\n\n            <Col span={12}>\n              <Form.Item\n                label=\"Variant\"\n                name=\"variant\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your variant!',\n                  },\n                ]}\n              >\n                <Select>\n                  {variantList.map(i=>(\n                    <Option key={i} value={i}>{i}</Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col span={12}>\n              <Form.Item label=\"Mileage\" name=\"mileage\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your mileage!',\n                  },\n                ]}\n              >\n                <Select onChange={(e)=>{}}>\n                  {mileageRange.map(i=>(\n                    <Option key={i} value={i}>{i}</Option>\n                  ))}\n                </Select>\n                {/* <InputNumber \n                  formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n                  parser={value => value.replace(/\\$\\s?|(,*)/g, '')}\n                  style={{width:'100%', textAlign:'right'}}\n                  min=\"0\"\n                  max=\"999999\"\n                  step=\"5000\" /> */}\n              </Form.Item>\n            </Col>\n\n            <Col span={12}>\n              <Form.Item\n                label=\"Remark\"\n                name=\"remark\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your remark!',\n                  },\n                ]}\n              >\n                <Input />\n              </Form.Item>\n            </Col>\n          </Row>\n        \n          <Row>\n          <Col span={12}>\n          <Form.Item label=\"Price\" name=\"price\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your price!',\n              },\n            ]}\n          >\n            <InputNumber \n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value.replace(/\\$\\s?|(,*)/g, '')}\n              style={{width:'100%', textAlign:'right'}}\n              min=\"0\"\n              max=\"999999999\"\n              step=\"10000\" />\n          </Form.Item>\n          </Col>\n\n          <Col span={12}>\n              <Form.Item label=\"Engine Capacity\" name=\"engine\"\n                rules={[\n                  {\n                    required: true,\n                    message: 'Please input your engine capacity!',\n                  },\n                ]}\n              >\n                <InputNumber \n                  style={{width:'100%', textAlign:'right'}}\n                  min=\"0\"\n                  max=\"999999\"\n                  step=\"0.1\" />\n              </Form.Item>\n            </Col>\n\n          </Row>\n\n\n          <Form.Item {...layout2}\n            label=\"Title\" name=\"title\"\n              rules={[\n                {\n                  required: true,\n                  message: 'Please input your title!',\n                },\n              ]}\n            >\n            <Input />\n          </Form.Item>\n\n          <Form.Item {...layout2} label=\"Description\" name=\"description\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your description!',\n              },\n            ]}\n          >\n            <TextArea rows={10} />\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Row>\n              <Col span={6}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                  {props.mode==='update'?\"Edit\":\"Create\"}\n                </Button>\n              </Col>\n              <Col span={6}>\n                <Button onClick={() => { router.push('/ads') }} type=\"warning\">\n                  Cancel\n                </Button>\n              </Col>\n            </Row>\n          </Form.Item>\n        </Form>\n      </Card>\n    </>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}